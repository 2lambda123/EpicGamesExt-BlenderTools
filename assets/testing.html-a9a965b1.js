import{_ as o,r as i,o as r,c as d,a as t,b as e,d as s,e as a}from"./app-e6168212.js";const l={},c=t("h1",{id:"help-test",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#help-test","aria-hidden":"true"},"#"),e(" Help Test")],-1),h={href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"},u=a(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="testing-against-open-app-instances" tabindex="-1"><a class="header-anchor" href="#testing-against-open-app-instances" aria-hidden="true">#</a> Testing Against Open App Instances</h2><ol><li>Open Blender</li><li>Open your Unreal Project and make sure <code>remote execution</code> is enabled.</li><li>Install the addons.</li><li>Start the RPC server <code>Pipeline &gt; Utilities &gt; Start RPC Servers</code>.</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ./tests
python run_tests.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Testing should begin.</p><h2 id="testing-against-docker-containers" tabindex="-1"><a class="header-anchor" href="#testing-against-docker-containers" aria-hidden="true">#</a> Testing Against Docker Containers</h2><p>The CI/CD system tests against the docker images. The containers are Linux.</p>`,7),p={class:"custom-container tip"},m=t("p",{class:"custom-container-title"},"Windows Users",-1),v={href:"https://docs.microsoft.com/en-us/windows/wsl/install",target:"_blank",rel:"noopener noreferrer"},b={href:"https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-10",target:"_blank",rel:"noopener noreferrer"},_={href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"},g=t("li",null,[e("Make sure docker is working by running "),t("code",null,"docker images"),e(".")],-1),f=t("li",null,[e("Set the environment variable "),t("code",null,"TEST_ENVIRONMENT=1"),e(".")],-1),T=t("code",null,"GITHUB_TOKEN=your-personal access-token",-1),k={href:"https://docs.unrealengine.com/4.27/en-US/SharingAndReleasing/Containers/ContainersQuickStart/",target:"_blank",rel:"noopener noreferrer"},E=a(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">set</span> <span class="token assign-left variable">GITHUB_TOKEN</span><span class="token operator">=</span>your-personal access-token
<span class="token builtin class-name">set</span> <span class="token assign-left variable">TEST_ENVIRONMENT</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">cd</span> ./tests
python run_tests.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Testing should begin.</p><div class="custom-container tip"><p class="custom-container-title">Note</p><p>If the you don&#39;t have the docker images already pulled this can take a while to pull the images.</p></div><h2 id="view-test-results" tabindex="-1"><a class="header-anchor" href="#view-test-results" aria-hidden="true">#</a> View Test Results</h2><p>The tests will run for a while and when they finish you should receive output like this indicating there were no failures.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>----------------------------------------------------------------------
Ran 74 tests in 917.496s

OK (skipped=30)

Generating XML reports...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xunit-files" tabindex="-1"><a class="header-anchor" href="#xunit-files" aria-hidden="true">#</a> XUnit Files</h3><p>The test runner will also output the results as xunit files to the <code>./tests/results</code> folder.</p>`,8),w={href:"https://www.npmjs.com/package/xunit-viewer",target:"_blank",rel:"noopener noreferrer"},y=a(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>xunit-viewer <span class="token parameter variable">-r</span> ./results
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>A <code>index.html</code> should now be available to view in the <code>tests</code> folder.</p><h2 id="environment-variables" tabindex="-1"><a class="header-anchor" href="#environment-variables" aria-hidden="true">#</a> Environment Variables</h2><p>The <code>run_tests.py</code> script can be customized with environment variables. You probably won&#39;t ever need to modify these from their defaults, however, since there are so many unit tests, targeting specific files with the <code>EXCLUSIVE_TEST_FILES</code> or specific cases with <code>EXCLUSIVE_TESTS</code> can be beneficial.</p><table><thead><tr><th>Variables</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>TEST_ENVIRONMENT</code></td><td>Whether to run the in the container test environment</td><td>If no value is set, testing will run on the host</td></tr><tr><td><code>EXCLUSIVE_TEST_FILES</code></td><td>Whether to run tests exclusively on this list of test files. Comma seperated list.</td><td>Runs all tests files by default</td></tr><tr><td><code>EXCLUSIVE_TESTS</code></td><td>Whether to run tests exclusively on this list of test names. Comma seperated list.</td><td>Runs all tests cases by default</td></tr><tr><td><code>REMOVE_CONTAINERS</code></td><td>Whether to shutdown and remove the containers after testing. Testing will be faster if the containers don&#39;t have to restart</td><td><code>True</code> by default. Leave blank if you want the containers to keep running</td></tr><tr><td><code>BLENDER_ADDONS</code></td><td>A comma seperated list of the addons to test</td><td><code>send2ue,ue2rigify</code></td></tr><tr><td><code>BLENDER_PORT</code></td><td>The port blender communicates on</td><td><code>9997</code> on host <code>8997</code> for container</td></tr><tr><td><code>UNREAL_PORT</code></td><td>The port unreal communicates on</td><td><code>9998</code> on host <code>8998</code> for container</td></tr><tr><td><code>HOST_REPO_FOLDER</code></td><td>The path on disk to the repo</td><td>The repo folder relative to the current working directory</td></tr><tr><td><code>CONTAINER_REPO_FOLDER</code></td><td>The path in the container where the repo is mounted</td><td><code>/tmp/blender_tools/</code></td></tr><tr><td><code>HOST_TEST_FOLDER</code></td><td>The path on disk to the repo tests folder</td><td>The current working directory</td></tr><tr><td><code>CONTAINER_TEST_FOLDER</code></td><td>The path in the container where the repo tests folder is mounted</td><td><code>/tmp/blender_tools/tests</code></td></tr><tr><td><code>RPC_TIME_OUT</code></td><td>When running a Non-Blocking server, the is a timeout value for command execution. If a command has been sent from the client, the server will try to give the client the response up until 20 seconds has passed. Once the response or timeout has been reached, the server will let the event loop of the DCC continue again.</td><td><code>20</code></td></tr><tr><td><code>RPC_EXECUTION_HISTORY_FILE</code></td><td>Lets you specify a file path to write out the python execution history by the rpc module. This is useful for debugging.</td><td><code>None</code></td></tr></tbody></table>`,5);function x(S,N){const n=i("ExternalLinkIcon");return r(),d("div",null,[c,t("p",null,[e("Testing can be done locally with your open Blender and Unreal Editor instances or with "),t("a",h,[e("Docker"),s(n)]),e(" containers. First install the requirements.")]),u,t("div",p,[m,t("p",null,[e("You will need to install "),t("a",v,[e("Windows Subsystem for Linux"),s(n)]),e(". Then install "),t("a",b,[e("Ubuntu on Windows"),s(n)])])]),t("ol",null,[t("li",null,[e("Install "),t("a",_,[e("Docker"),s(n)]),e(".")]),g,f,t("li",null,[e("Set the environment variable "),T,e(". This is needed to pull the "),t("a",k,[e("unreal container image"),s(n)]),e(" if you don't already have it.")])]),E,t("p",null,[e("A handy cli tool for viewing xml unittest results is "),t("a",w,[e("xunit-viewer"),s(n)]),e(". If you wish you can install it and run:")]),y])}const O=o(l,[["render",x],["__file","testing.html.vue"]]);export{O as default};
